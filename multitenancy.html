<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>Multitenancy</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_multitenancy">1. Multitenancy</a>
<ul class="sectlevel2">
<li><a href="#_tenant_identification">1.1. Tenant identification</a></li>
<li><a href="#_tenant_scope">1.2. Tenant scope</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_multitenancy">1. Multitenancy</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_tenant_identification">1.1. Tenant identification</h3>
<div class="paragraph">
<p>Weblith offers multiple ways of managing multiple tenants for your web application:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Different domain names</p>
</li>
<li>
<p>Different subdomain names</p>
</li>
<li>
<p>Mixing both configurations</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When a tenant is identified from one of those configurations, the tenant identifier will be available for the current http request using <code>TenantContext.id()</code>. That means you can for example configure a multitenancy strategy for your persistence context (check <a href="https://www.baeldung.com/hibernate-5-multitenancy">this article</a> for Hibernate).</p>
</div>
<div class="paragraph">
<p>If your application doesn&#8217;t define any configuration, one single tenant called <code>public</code> will be identified by default.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
For processes that should run outside a http request, <code>TenantContext</code> provides an <code>executeFor</code> method that takes a tenant identifier and a runnable as parameters.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_tenant_scope">1.2. Tenant scope</h3>
<div class="paragraph">
<p>The same way Quarkus does already provide the <code>@ApplicationScoped</code> and <code>@RequestScoped</code> annotations, Weblith adds a new scope to the default one through the <code>@TenantScoped</code> application. It will allow you to define some specific beans being instanced once for each tenant.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 0.1.1-SNAPSHOT<br>
Last updated 2021-05-23 19:21:48 UTC
</div>
</div>
</body>
</html>